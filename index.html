<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>R&G Proposal Builder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @page {
      margin: 1in; /* 1-inch margins for printing */
    }

    @media print {
      html, body {
        background: #fff !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      /* Hide all buttons and elements with no-print */
      .no-print, .no-print * {
        display: none !important;
      }

      /* Remove shadows, borders, rounded corners */
      *, *::before, *::after {
        box-shadow: none !important;
        border: none !important;
        border-radius: 0 !important;
        background: transparent !important;
      }

      /* Proposal container should be pure white and full width */
      #proposal-output {
        background: #fff !important;
        padding: 0 !important;
        margin: 0 !important;
      }
    }

    /* Signature and date styling */
    .signature-section {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 2px solid #000;
    }

    .signature-line {
      flex: 0 0 60%;
      border-top: 1px solid #000;
      height: 2px;
    }

    .signature-label {
      margin-top: 0.5rem;
      text-align: center;
      font-size: 0.9rem;
      color: #000;
    }

    .date-section {
      flex: 0 0 30%;
      text-align: center;
    }

    .date-line {
      border-top: 1px solid #000;
      height: 2px;
    }

    .date-label {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #000;
    }
  </style>
</head>
<body class="bg-gray-100">
  <div id="app" class="max-w-4xl mx-auto p-6">
    <!-- Proposal Output -->
    <div id="proposal-output" class="hidden bg-white rounded-lg shadow-lg p-8">
      <!-- Header -->
      <div class="text-center mb-6">
        <img src="https://your-logo-url-here" alt="RG Air" class="mx-auto h-16">
        <h1 class="text-2xl font-bold mt-2">Proposal</h1>
      </div>

      <!-- Proposal Details -->
      <div class="mb-6">
        <p><strong>To:</strong> <span id="output-to"></span></p>
        <p><strong>Street Address:</strong> <span id="output-street-address"></span></p>
        <p><strong>City, State, ZIP:</strong> <span id="output-city-state-zip"></span></p>
        <p><strong>Job Name:</strong> <span id="output-job-name"></span></p>
        <p><strong>Proposal #:</strong> <span id="output-proposal-no"></span></p>
        <p><strong>Location:</strong> <span id="output-location"></span></p>
        <p><strong>Date:</strong> <span id="output-date"></span></p>
      </div>

      <!-- Scope & Description -->
      <div class="mb-6">
        <h2 class="font-bold text-lg mb-2">Scope of Work</h2>
        <p id="output-scope"></p>

        <h2 class="font-bold text-lg mt-4 mb-2">Description</h2>
        <ul id="output-description" class="list-disc ml-5"></ul>
      </div>

      <!-- Pricing Table -->
      <div class="mb-6">
        <h2 class="font-bold text-lg mb-2">Pricing</h2>
        <div id="output-pricing-table" class="mb-4"></div>
        <p><strong>Subtotal:</strong> <span id="output-subtotal"></span></p>
        <p><strong>Sales Tax:</strong> <span id="output-sales-tax"></span></p>
        <p class="font-bold text-xl mt-2"><strong>Total:</strong> <span id="output-total"></span></p>
      </div>

      <!-- Payment Terms -->
      <div class="mb-6">
        <h2 class="font-bold text-lg mb-2">Payment Terms</h2>
        <p id="output-payment-terms"></p>
      </div>

      <!-- Signature & Date Section -->
      <div class="signature-section">
        <div class="signature">
          <div class="signature-line"></div>
          <div class="signature-label">Customer Signature</div>
        </div>
        <div class="date-section">
          <div class="date-line"></div>
          <div class="date-label">Date</div>
        </div>
      </div>

      <!-- Buttons -->
      <div class="flex justify-end space-x-4 mt-8 no-print">
        <button id="back-btn" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded">Back to Editor</button>
        <button id="print-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">Print Proposal</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const generateBtn = document.getElementById('generate-btn');
      const printBtn = document.getElementById('print-btn');
      const backBtn = document.getElementById('back-btn');
      const proposalForm = document.getElementById('proposal-form');
      const proposalOutput = document.getElementById('proposal-output');
      const dateInput = document.getElementById('date');
      const outputDate = document.getElementById('output-date');

      const today = new Date().toISOString().split('T')[0];
      if (dateInput) dateInput.value = today;

      if (printBtn) {
        printBtn.addEventListener('click', () => window.print());
      }
      if (backBtn) {
        backBtn.addEventListener('click', () => {
          proposalOutput.classList.add('hidden');
          proposalForm.classList.remove('hidden');
        });
      }
    });
  </script>
</body>
</html>
